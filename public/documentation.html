<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>MovieMobs API - Documentation</title>
    <link
      rel="stylesheet"
      href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css"
    />
    <link
      href="https://fonts.googleapis.com/css2?family=Moderustic&display=swap"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="css/style.production.css" />
  </head>
  <body>
    <header>
      <nav class="navbar navbar-expand-lg navbar-dark bg-primary">
        <div class="container">
          <a class="navbar-brand" href="index.html">MOVIEMOBS API</a>
          <button
            class="navbar-toggler"
            type="button"
            data-toggle="collapse"
            data-target="#navbarNav"
            aria-controls="navbarNav"
            aria-expanded="false"
            aria-label="Toggle navigation"
          >
            <span class="navbar-toggler-icon"></span>
          </button>
          <div class="collapse navbar-collapse" id="navbarNav">
            <ul class="navbar-nav ml-auto">
              <li class="nav-item dropdown">
                <a
                  class="nav-link dropdown-toggle"
                  href="#"
                  id="contactDropdown"
                  role="button"
                  data-toggle="dropdown"
                  aria-haspopup="true"
                  aria-expanded="false"
                >
                  Contact
                </a>
                <div class="dropdown-menu" aria-labelledby="contactDropdown">
                  <a class="dropdown-item" href="mailto:ivancortes@hotmail.com"
                    >Email</a
                  >
                  <a
                    class="dropdown-item"
                    href="https://github.com/ivencomur"
                    target="_blank"
                    rel="noopener"
                    >GitHub</a
                  >
                  <a
                    class="dropdown-item"
                    href="https://x.com/IVENCOMUR"
                    target="_blank"
                    rel="noopener"
                    >X (formerly Twitter)</a
                  >
                  <a
                    class="dropdown-item"
                    href="https://www.linkedin.com/in/ivan-cortes-murcia-22053953"
                    target="_blank"
                    rel="noopener"
                    >LinkedIn</a
                  >
                </div>
              </li>
              <li class="nav-item">
                <a class="nav-link" href="documentation.html"
                  >API Documentation</a
                >
              </li>
            </ul>
          </div>
        </div>
      </nav>
    </header>
    <main class="container">
      <section class="mt-4">
        <h1 class="header__title text-center">MovieMobs API Documentation</h1>
        <p class="api-description text-center">
          Base URL:
          <code>https://iecm-movies-app-6966360ed90e.herokuapp.com/</code>
          <br />(or <code>http://localhost:YOUR_PORT</code> for local testing,
          typically <code>http://localhost:8080</code>).
        </p>
      </section>
      <section class="mt-5">
        <h2 id="summary">Endpoint Summary</h2>
        <div class="table-responsive">
          <table class="table table-bordered table-striped table-hover">
            <thead class="thead-dark">
              <tr>
                <th>Endpoint Description</th>
                <th>URL Path</th>
                <th>HTTP Method</th>
                <th>Authentication</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td>Login User</td>
                <td><code>/login</code></td>
                <td><span class="method-post">POST</span></td>
                <td><span class="auth-public">Public</span></td>
              </tr>
              <tr>
                <td>Register New User(s)</td>
                <td><code>/users</code></td>
                <td><span class="method-post">POST</span></td>
                <td><span class="auth-public">Public</span></td>
              </tr>
              <tr>
                <td>Get Authenticated User's Profile</td>
                <td><code>/user</code></td>
                <td><span class="method-get">GET</span></td>
                <td><span class="auth-jwt">JWT</span></td>
              </tr>
              <tr>
                <td>Update Authenticated User's Profile</td>
                <td><code>/user</code></td>
                <td><span class="method-put">PUT</span></td>
                <td><span class="auth-jwt">JWT</span></td>
              </tr>
              <tr>
                <td>Add Favorite Movie</td>
                <td><code>/user/favorites/:movieId</code></td>
                <td><span class="method-post">POST</span></td>
                <td><span class="auth-jwt">JWT</span></td>
              </tr>
              <tr>
                <td>Remove Favorite Movie</td>
                <td><code>/user/favorites/:movieId</code></td>
                <td><span class="method-delete">DELETE</span></td>
                <td><span class="auth-jwt">JWT</span></td>
              </tr>
              <tr>
                <td>Deregister Authenticated User</td>
                <td><code>/user</code></td>
                <td><span class="method-delete">DELETE</span></td>
                <td><span class="auth-jwt">JWT</span></td>
              </tr>
              <tr>
                <td>Get All Movies</td>
                <td><code>/movies</code></td>
                <td><span class="method-get">GET</span></td>
                <td><span class="auth-jwt">JWT</span></td>
              </tr>
              <tr>
                <td>Get Movie by ID</td>
                <td><code>/movies/:movieId</code></td>
                <td><span class="method-get">GET</span></td>
                <td><span class="auth-jwt">JWT</span></td>
              </tr>
              <tr>
                <td>Get Movie by Title</td>
                <td><code>/movies/title/:title</code></td>
                <td><span class="method-get">GET</span></td>
                <td><span class="auth-jwt">JWT</span></td>
              </tr>
              <tr>
                <td>Get Movies by Genre Name</td>
                <td><code>/movies/genre/:genreName</code></td>
                <td><span class="method-get">GET</span></td>
                <td><span class="auth-jwt">JWT</span></td>
              </tr>
              <tr>
                <td>Get Movies by Director Name</td>
                <td><code>/movies/director/:directorName</code></td>
                <td><span class="method-get">GET</span></td>
                <td><span class="auth-jwt">JWT</span></td>
              </tr>
              <tr>
                <td>Add New Movie</td>
                <td><code>/movies</code></td>
                <td><span class="method-post">POST</span></td>
                <td><span class="auth-jwt">JWT</span></td>
              </tr>
              <tr>
                <td>Update Movie</td>
                <td><code>/movies/:movieId</code></td>
                <td><span class="method-put">PUT</span></td>
                <td><span class="auth-jwt">JWT</span></td>
              </tr>
              <tr>
                <td>Delete Movie</td>
                <td><code>/movies/:movieId</code></td>
                <td><span class="method-delete">DELETE</span></td>
                <td><span class="auth-jwt">JWT</span></td>
              </tr>
              <tr>
                <td>Get Movie Actors</td>
                <td><code>/movies/:movieId/actors</code></td>
                <td><span class="method-get">GET</span></td>
                <td><span class="auth-jwt">JWT</span></td>
              </tr>
              <tr>
                <td>Get All Genres</td>
                <td><code>/genres</code></td>
                <td><span class="method-get">GET</span></td>
                <td><span class="auth-jwt">JWT</span></td>
              </tr>
              <tr>
                <td>Get Genre by Name</td>
                <td><code>/genres/:name</code></td>
                <td><span class="method-get">GET</span></td>
                <td><span class="auth-jwt">JWT</span></td>
              </tr>
              <tr>
                <td>Add New Genre</td>
                <td><code>/genres</code></td>
                <td><span class="method-post">POST</span></td>
                <td><span class="auth-jwt">JWT</span></td>
              </tr>
              <tr>
                <td>Update Genre</td>
                <td><code>/genres/:name</code></td>
                <td><span class="method-put">PUT</span></td>
                <td><span class="auth-jwt">JWT</span></td>
              </tr>
              <tr>
                <td>Delete Genre</td>
                <td><code>/genres/:name</code></td>
                <td><span class="method-delete">DELETE</span></td>
                <td><span class="auth-jwt">JWT</span></td>
              </tr>
              <tr>
                <td>Get All Directors</td>
                <td><code>/directors</code></td>
                <td><span class="method-get">GET</span></td>
                <td><span class="auth-jwt">JWT</span></td>
              </tr>
              <tr>
                <td>Get Directors by Name (Search)</td>
                <td><code>/directors/name/:name</code></td>
                <td><span class="method-get">GET</span></td>
                <td><span class="auth-jwt">JWT</span></td>
              </tr>
              <tr>
                <td>Get Director by ID</td>
                <td><code>/directors/:directorId</code></td>
                <td><span class="method-get">GET</span></td>
                <td><span class="auth-jwt">JWT</span></td>
              </tr>
              <tr>
                <td>Add New Director</td>
                <td><code>/directors</code></td>
                <td><span class="method-post">POST</span></td>
                <td><span class="auth-jwt">JWT</span></td>
              </tr>
              <tr>
                <td>Update Director</td>
                <td><code>/directors/:directorId</code></td>
                <td><span class="method-put">PUT</span></td>
                <td><span class="auth-jwt">JWT</span></td>
              </tr>
              <tr>
                <td>Delete Director</td>
                <td><code>/directors/:directorId</code></td>
                <td><span class="method-delete">DELETE</span></td>
                <td><span class="auth-jwt">JWT</span></td>
              </tr>
              <tr>
                <td>Get All Actors</td>
                <td><code>/actors</code></td>
                <td><span class="method-get">GET</span></td>
                <td><span class="auth-jwt">JWT</span></td>
              </tr>
              <tr>
                <td>Get Actors by Name (Search)</td>
                <td><code>/actors/name/:name</code></td>
                <td><span class="method-get">GET</span></td>
                <td><span class="auth-jwt">JWT</span></td>
              </tr>
              <tr>
                <td>Get Actor by ID</td>
                <td><code>/actors/:actorId</code></td>
                <td><span class="method-get">GET</span></td>
                <td><span class="auth-jwt">JWT</span></td>
              </tr>
              <tr>
                <td>Add New Actor</td>
                <td><code>/actors</code></td>
                <td><span class="method-post">POST</span></td>
                <td><span class="auth-jwt">JWT</span></td>
              </tr>
              <tr>
                <td>Update Actor</td>
                <td><code>/actors/:actorId</code></td>
                <td><span class="method-put">PUT</span></td>
                <td><span class="auth-jwt">JWT</span></td>
              </tr>
              <tr>
                <td>Delete Actor</td>
                <td><code>/actors/:actorId</code></td>
                <td><span class="method-delete">DELETE</span></td>
                <td><span class="auth-jwt">JWT</span></td>
              </tr>
              <tr>
                <td>Get All Users (Admin)</td>
                <td><code>/admin/users</code></td>
                <td><span class="method-get">GET</span></td>
                <td><span class="auth-jwt">JWT (Admin)</span></td>
              </tr>
              <tr>
                <td>Get All Movies (Admin)</td>
                <td><code>/admin/movies</code></td>
                <td><span class="method-get">GET</span></td>
                <td><span class="auth-jwt">JWT (Admin)</span></td>
              </tr>
              <tr>
                <td>Get All Genres (Admin)</td>
                <td><code>/admin/genres</code></td>
                <td><span class="method-get">GET</span></td>
                <td><span class="auth-jwt">JWT (Admin)</span></td>
              </tr>
              <tr>
                <td>Get All Directors (Admin)</td>
                <td><code>/admin/directors</code></td>
                <td><span class="method-get">GET</span></td>
                <td><span class="auth-jwt">JWT (Admin)</span></td>
              </tr>
              <tr>
                <td>Get All Actors (Admin)</td>
                <td><code>/admin/actors</code></td>
                <td><span class="method-get">GET</span></td>
                <td><span class="auth-jwt">JWT (Admin)</span></td>
              </tr>
            </tbody>
          </table>
        </div>
      </section>
      <section class="mt-5">
        <h2 id="authentication">Authentication</h2>
        <p>
          Most endpoints require authentication using a JSON Web Token (JWT).
          Obtain a token via <code>POST /login</code>.
        </p>
        <p>
          Include the token in the <code>Authorization</code> header for
          protected requests: <code>Authorization: Bearer YOUR_JWT_TOKEN</code>
        </p>
        <p>
          The JWT signing/verification relies on a
          <code>JWT_SECRET</code> environment variable configured on the server.
        </p>
        <h3><span class="method-post">POST</span> /login</h3>
        <p>Authenticates a user and returns user data along with a JWT.</p>
        <ul>
          <li>
            <strong>Authentication:</strong>
            <span class="auth-public">Public</span>
          </li>
          <li>
            <strong>Request Body:</strong> JSON object with
            <code>username</code> (String,
            <span class="required">Required</span>) and
            <code>password</code> (String,
            <span class="required">Required</span>).
          </li>
          <li>
            <strong>Success Response (200 OK):</strong> JSON object:
            <code
              >{ "user": { ...user details without password... }, "token":
              "eyJ..." }</code
            >
          </li>
          <li>
            <strong>Error Responses:</strong> 401 (Invalid credentials), 500
            (Token generation error)
          </li>
        </ul>
      </section>
      <section class="mt-5">
        <h2 id="users">User Endpoints</h2>
        <h3><span class="method-post">POST</span> /users</h3>
        <p>Registers a new user account or multiple user accounts (batch).</p>
        <ul>
          <li>
            <strong>Authentication:</strong
            ><span class="auth-public">Public</span>
          </li>
          <li>
            <strong>Request Body:</strong> Either:
            <ol>
              <li>
                A single JSON user object:
                <ul>
                  <li>
                    <code>username</code> (<span class="required">Required</span
                    >, String): Min 5 alphanumeric chars.
                  </li>
                  <li>
                    <code>password</code> (<span class="required">Required</span
                    >, String): Min 8 chars.
                  </li>
                  <li>
                    <code>email</code> (<span class="required">Required</span>,
                    String): Valid email format.
                  </li>
                  <li>
                    <code>birthday</code> (Optional, String): Valid date string
                    (e.g., "YYYY-MM-DD" or ISO8601).
                  </li>
                  <li>
                    <code>firstname</code> (Optional, String): Non-empty if
                    provided.
                  </li>
                  <li>
                    <code>lastname</code> (Optional, String): Non-empty if
                    provided.
                  </li>
                </ul>
              </li>
              <li>
                OR, a JSON array <code>[ ]</code> containing multiple user
                objects (each following the structure above) for batch creation.
              </li>
            </ol>
          </li>
          <li>
            <strong>Success Response:</strong>
            <ul>
              <li>
                For single user input: <code>201 Created</code> with JSON object
                of the new user (excluding password).
              </li>
              <li>
                For array input (all users created successfully):
                <code>201 Created</code> with JSON array of created user objects
                (excluding passwords).
              </li>
              <li>
                For array input (partial success):
                <code>207 Multi-Status</code> with JSON detailing succeeded and
                failed creations:
                <code
                  >{ "message": "...", "succeeded_count": N, "failed_count": M,
                  "succeeded": [...], "failed": [...] }</code
                >.
              </li>
            </ul>
          </li>
          <li>
            <strong>Error Responses:</strong>
            <ul>
              <li>
                For single user input: <code>400</code> (Validation errors,
                Username/Email already exists), <code>500</code>.
              </li>
              <li>
                For array input (all users failed): <code>400</code> (e.g.,
                <code
                  >{ "message": "All user creations...", "errors": [...] }</code
                >).
              </li>
              <li>Other batch errors: <code>500</code>.</li>
            </ul>
          </li>
        </ul>
        <h3><span class="method-get">GET</span> /user</h3>
        <p>Retrieves the authenticated user's profile information.</p>
        <ul>
          <li>
            <strong>Authentication:</strong
            ><span class="auth-jwt">JWT Required</span>
          </li>
          <li>
            <strong>Success Response (200 OK):</strong> JSON user object
            (excluding password) with populated
            <code>favoriteMovies</code> array.
          </li>
          <li>
            <strong>Error Responses:</strong> 401 (Unauthorized), 404 (User not found),
            500
          </li>
        </ul>
        <h3><span class="method-put">PUT</span> /user</h3>
        <p>Updates the authenticated user's profile information.</p>
        <ul>
          <li>
            <strong>Authentication:</strong>
            <span class="auth-jwt">JWT Required</span>
          </li>
          <li>
            <strong>Request Body:</strong> JSON object with optional fields to
            update: <code>username</code> (String, Min 5 alphanumeric),
            <code>email</code> (String, valid format),
            <code>birthday</code> (String, "YYYY-MM-DD"),
            <code>firstname</code> (String), <code>lastname</code> (String).
            Password can also be updated.
          </li>
          <li>
            <strong>Success Response (200 OK):</strong> JSON object of the
            updated user (excluding password).
          </li>
          <li>
            <strong>Error Responses:</strong> 400 (Validation errors,
            Username/Email conflict, No fields to update), 401, 404 (User
            not found), 500
          </li>
        </ul>
        <h3>
          <span class="method-post">POST</span>
          /user/favorites/:movieId
        </h3>
        <p>Adds a movie to the authenticated user's list of favorite movies.</p>
        <ul>
          <li>
            <strong>Authentication:</strong>
            <span class="auth-jwt">JWT Required</span>
          </li>
          <li>
            <strong>URL Parameters:</strong> <code>:movieId</code> (<span class="required"
              >Required</span
            >, ObjectId String).
          </li>
          <li>
            <strong>Success Response (200 OK):</strong> JSON user object with
            updated, populated <code>favoriteMovies</code>.
          </li>
          <li>
            <strong>Error Responses:</strong> 400 (Invalid Movie ID), 401,
            404 (User or Movie not found), 500
          </li>
        </ul>
        <h3>
          <span class="method-delete">DELETE</span>
          /user/favorites/:movieId
        </h3>
        <p>Removes a movie from the authenticated user's list of favorite movies.</p>
        <ul>
          <li>
            <strong>Authentication:</strong>
            <span class="auth-jwt">JWT Required</span>
          </li>
          <li>
            <strong>URL Parameters:</strong> <code>:movieId</code> (<span class="required"
              >Required</span
            >, ObjectId String).
          </li>
          <li>
            <strong>Success Response (200 OK):</strong> JSON user object with
            updated, populated <code>favoriteMovies</code>.
          </li>
          <li>
            <strong>Error Responses:</strong> 400 (Invalid Movie ID), 401,
            404 (User not found), 500
          </li>
        </ul>
        <h3><span class="method-delete">DELETE</span> /user</h3>
        <p>Deregisters the authenticated user's account.</p>
        <ul>
          <li>
            <strong>Authentication:</strong>
            <span class="auth-jwt">JWT Required</span>
          </li>
          <li>
            <strong>Success Response (200 OK):</strong> JSON:
            <code
              >{ "message": "User account '...' deleted successfully." }</code
            >
          </li>
          <li>
            <strong>Error Responses:</strong> 401, 404 (User not found),
            500
          </li>
        </ul>
      </section>
            <section class="mt-5">
        <h2 id="movies">Movie Endpoints</h2>
        <h3><span class="method-get">GET</span> /movies</h3>
        <p>
          Retrieves a list of all movies with populated genre, director, and
          actors (names only for actors).
        </p>
        <ul>
          <li>
            <strong>Authentication:</strong
            ><span class="auth-jwt">JWT Required</span>
          </li>
          <li>
            <strong>Success Response (200 OK):</strong> JSON array of movie
            objects.
          </li>
          <li><strong>Error Responses:</strong> 401, 500</li>
        </ul>
        <h3><span class="method-get">GET</span> /movies/:movieId</h3>
        <p>
          Retrieves details for a single movie by its ID, with populated genre,
          director, and actors.
        </p>
        <ul>
          <li>
            <strong>Authentication:</strong
            ><span class="auth-jwt">JWT Required</span>
          </li>
          <li>
            <strong>URL Parameters:</strong> <code>:movieId</code> (<span
              class="required"
              >Required</span
            >, ObjectId String).
          </li>
          <li>
            <strong>Success Response (200 OK):</strong> JSON object of the
            movie.
          </li>
          <li>
            <strong>Error Responses:</strong> 400 (Invalid Movie ID), 401, 404
            (Movie not found), 500
          </li>
        </ul>
        <h3><span class="method-get">GET</span> /movies/title/:title</h3>
        <p>
          Retrieves details for a movie by its title (case-insensitive, exact
          match), with populated genre, director, and actors.
        </p>
        <ul>
          <li>
            <strong>Authentication:</strong
            ><span class="auth-jwt">JWT Required</span>
          </li>
          <li>
            <strong>URL Parameters:</strong> <code>:title</code> (<span
              class="required"
              >Required</span
            >, String).
          </li>
          <li>
            <strong>Success Response (200 OK):</strong> JSON object of the
            movie.
          </li>
          <li>
            <strong>Error Responses:</strong> 401, 404 (Movie not found), 500
          </li>
        </ul>
        <h3><span class="method-get">GET</span> /movies/genre/:genreName</h3>
        <p>
          Retrieves movies belonging to a specific genre (case-insensitive,
          exact match for genre name), with populated movie details.
        </p>
        <ul>
          <li>
            <strong>Authentication:</strong
            ><span class="auth-jwt">JWT Required</span>
          </li>
          <li>
            <strong>URL Parameters:</strong> <code>:genreName</code> (<span
              class="required"
              >Required</span
            >, String).
          </li>
          <li>
            <strong>Success Response (200 OK):</strong> JSON array of movie
            objects.
          </li>
          <li>
            <strong>Error Responses:</strong> 401, 404 (Genre not found), 500
          </li>
        </ul>
        <h3>
          <span class="method-get">GET</span> /movies/director/:directorName
        </h3>
        <p>
          Retrieves movies directed by a specific director (case-insensitive,
          exact match for director name), with populated movie details.
        </p>
        <ul>
          <li>
            <strong>Authentication:</strong
            ><span class="auth-jwt">JWT Required</span>
          </li>
          <li>
            <strong>URL Parameters:</strong> <code>:directorName</code> (<span
              class="required"
              >Required</span
            >, String).
          </li>
          <li>
            <strong>Success Response (200 OK):</strong> JSON array of movie
            objects.
          </li>
          <li>
            <strong>Error Responses:</strong> 401, 404 (Director not found), 500
          </li>
        </ul>
        <h3><span class="method-post">POST</span> /movies</h3>
        <p>
          Adds a new movie to the database. Requires names for genre and
          director, and array of names for actors, which will be resolved to
          IDs.
        </p>
        <ul>
          <li>
            <strong>Authentication:</strong
            ><span class="auth-jwt">JWT Required</span>
          </li>
          <li>
            <strong>Request Body:</strong> JSON object: <code>title</code>(<span
              class="required"
              >Req</span
            >), <code>description</code>(<span class="required">Req</span>),
            <code>genre</code>(<span class="required">Req</span>, String: Genre
            Name), <code>director</code>(<span class="required">Req</span>,
            String: Director Name), <code>actors</code>(Optional, Array of
            Strings: Actor Names), <code>imagePath</code>(Optional, URL String),
            <code>featured</code>(Optional, Boolean),
            <code>releaseYear</code>(Optional, Number),
            <code>rating</code>(Optional, Number).
          </li>
          <li>
            <strong>Success Response (201 Created):</strong> JSON object of the
            new movie, fully populated.
          </li>
          <li>
            <strong>Error Responses:</strong> 400 (Validation errors, Movie
            title exists, Genre/Director/Some Actors not found), 401, 500
          </li>
        </ul>
        <h3><span class="method-put">PUT</span> /movies/:movieId</h3>
        <p>
          Updates an existing movie's details. Similar to POST, uses names for
          genre, director, actors if provided.
        </p>
        <ul>
          <li>
            <strong>Authentication:</strong
            ><span class="auth-jwt">JWT Required</span>
          </li>
          <li>
            <strong>URL Parameters:</strong> <code>:movieId</code> (<span
              class="required"
              >Required</span
            >, ObjectId String).
          </li>
          <li>
            <strong>Request Body:</strong> JSON object with optional fields to
            update (matching POST format for genre, director, actors if they are
            being changed).
          </li>
          <li>
            <strong>Success Response (200 OK):</strong> JSON object of the
            updated movie, fully populated.
          </li>
          <li>
            <strong>Error Responses:</strong> 400 (Validation errors, Invalid
            Movie ID, Genre/Director/Some Actors not found, No fields to
            update), 401, 404 (Movie not found), 500
          </li>
        </ul>
        <h3><span class="method-delete">DELETE</span> /movies/:movieId</h3>
        <p>
          Deletes a movie from the database. Also removes it from users'
          favorite lists.
        </p>
        <ul>
          <li>
            <strong>Authentication:</strong
            ><span class="auth-jwt">JWT Required</span>
          </li>
          <li>
            <strong>URL Parameters:</strong> <code>:movieId</code> (<span
              class="required"
              >Required</span
            >, ObjectId String).
          </li>
          <li>
            <strong>Success Response (200 OK):</strong> JSON:
            <code>{ "message": "Movie '...' deleted successfully." }</code>
          </li>
          <li>
            <strong>Error Responses:</strong> 400 (Invalid Movie ID), 401, 404
            (Movie not found), 500
          </li>
        </ul>
        <h3><span class="method-get">GET</span> /movies/:movieId/actors</h3>
        <p>Retrieves the list of actors (full objects) for a specific movie.</p>
        <ul>
          <li>
            <strong>Authentication:</strong
            ><span class="auth-jwt">JWT Required</span>
          </li>
          <li>
            <strong>URL Parameters:</strong> <code>:movieId</code> (<span
              class="required"
              >Required</span
            >, ObjectId String).
          </li>
          <li>
            <strong>Success Response (200 OK):</strong> JSON array of actor
            objects (name, bio, birth, death, pictureUrl).
          </li>
          <li>
            <strong>Error Responses:</strong> 400 (Invalid Movie ID), 401, 404
            (Movie not found), 500
          </li>
        </ul>
      </section>
      <section class="mt-5">
        <h2 id="genres">Genre Endpoints</h2>
        <h3><span class="method-get">GET</span> /genres</h3>
        <p>Retrieves a list of all genres (name and description).</p>
        <ul>
          <li>
            <strong>Authentication:</strong
            ><span class="auth-jwt">JWT Required</span>
          </li>
          <li>
            <strong>Success Response (200 OK):</strong> JSON array of genre
            objects.
          </li>
          <li><strong>Error Responses:</strong> 401, 500</li>
        </ul>
        <h3><span class="method-get">GET</span> /genres/:name</h3>
        <p>
          Retrieves details for a genre by name (case-insensitive, exact match).
        </p>
        <ul>
          <li>
            <strong>Authentication:</strong
            ><span class="auth-jwt">JWT Required</span>
          </li>
          <li>
            <strong>URL Parameters:</strong> <code>:name</code> (<span
              class="required"
              >Required</span
            >, String).
          </li>
          <li>
            <strong>Success Response (200 OK):</strong> JSON object of the
            genre.
          </li>
          <li>
            <strong>Error Responses:</strong> 401, 404 (Genre not found), 500
          </li>
        </ul>
        <h3><span class="method-post">POST</span> /genres</h3>
        <p>Adds a new genre.</p>
        <ul>
          <li>
            <strong>Authentication:</strong
            ><span class="auth-jwt">JWT Required</span>
          </li>
          <li>
            <strong>Request Body:</strong> JSON: <code>name</code> (<span
              class="required"
              >Required</span
            >, String), <code>description</code> (<span class="required"
              >Required</span
            >, String).
          </li>
          <li>
            <strong>Success Response (201 Created):</strong> JSON object of the
            new genre.
          </li>
          <li>
            <strong>Error Responses:</strong> 400 (Validation errors, Genre name
            already exists), 401, 500
          </li>
        </ul>
        <h3><span class="method-put">PUT</span> /genres/:name</h3>
        <p>
          Updates a genre's description (case-insensitive, exact match for genre
          name).
        </p>
        <ul>
          <li>
            <strong>Authentication:</strong
            ><span class="auth-jwt">JWT Required</span>
          </li>
          <li>
            <strong>URL Parameters:</strong> <code>:name</code> (<span
              class="required"
              >Required</span
            >, String).
          </li>
          <li>
            <strong>Request Body:</strong> JSON: <code>description</code> (<span
              class="required"
              >Required</span
            >, String).
          </li>
          <li>
            <strong>Success Response (200 OK):</strong> JSON object of the
            updated genre.
          </li>
          <li>
            <strong>Error Responses:</strong> 400 (Validation errors), 401, 404
            (Genre not found), 500
          </li>
        </ul>
        <h3><span class="method-delete">DELETE</span> /genres/:name</h3>
        <p>
          Deletes a genre (case-insensitive, exact match). Fails if the genre is
          currently assigned to any movies.
        </p>
        <ul>
          <li>
            <strong>Authentication:</strong
            ><span class="auth-jwt">JWT Required</span>
          </li>
          <li>
            <strong>URL Parameters:</strong> <code>:name</code> (<span
              class="required"
              >Required</span
            >, String).
          </li>
          <li>
            <strong>Success Response (200 OK):</strong> JSON:
            <code>{ "message": "Genre '...' deleted successfully." }</code>
          </li>
          <li>
            <strong>Error Responses:</strong> 400 (Genre in use), 401, 404
            (Genre not found), 500
          </li>
        </ul>
      </section>
      <section class="mt-5">
        <h2 id="directors">Director Endpoints</h2>
        <h3><span class="method-get">GET</span> /directors</h3>
        <p>Retrieves a list of all directors (name, bio, birth, death).</p>
        <ul>
          <li>
            <strong>Authentication:</strong
            ><span class="auth-jwt">JWT Required</span>
          </li>
          <li>
            <strong>Success Response (200 OK):</strong> JSON array of director
            objects.
          </li>
          <li><strong>Error Responses:</strong> 401, 500</li>
        </ul>
        <h3><span class="method-get">GET</span> /directors/name/:name</h3>
        <p>
          Retrieves directors by name (case-insensitive, partial match). Returns
          array.
        </p>
        <ul>
          <li>
            <strong>Authentication:</strong
            ><span class="auth-jwt">JWT Required</span>
          </li>
          <li>
            <strong>URL Parameters:</strong> <code>:name</code> (<span
              class="required"
              >Required</span
            >, String).
          </li>
          <li>
            <strong>Success Response (200 OK):</strong> JSON array of matching
            director objects. (Returns 404 if no matches)
          </li>
          <li>
            <strong>Error Responses:</strong> 401, 404 (No directors found), 500
          </li>
        </ul>
        <h3><span class="method-get">GET</span> /directors/:directorId</h3>
        <p>Retrieves details for a single director by ID.</p>
        <ul>
          <li>
            <strong>Authentication:</strong
            ><span class="auth-jwt">JWT Required</span>
          </li>
          <li>
            <strong>URL Parameters:</strong> <code>:directorId</code> (<span
              class="required"
              >Required</span
            >, ObjectId String).
          </li>
          <li>
            <strong>Success Response (200 OK):</strong> JSON object of the
            director.
          </li>
          <li>
            <strong>Error Responses:</strong> 400 (Invalid Director ID), 401,
            404 (Director not found), 500
          </li>
        </ul>
        <h3><span class="method-post">POST</span> /directors</h3>
        <p>Adds a new director.</p>
        <ul>
          <li>
            <strong>Authentication:</strong
            ><span class="auth-jwt">JWT Required</span>
          </li>
          <li>
            <strong>Request Body:</strong> JSON: <code>name</code>(<span
              class="required"
              >Req</span
            >), <code>bio</code>(<span class="required">Req</span>),
            <code>birth</code>(<span class="required">Req</span>, Date String
            "YYYY-MM-DD"), <code>death</code>(Optional, Date String
            "YYYY-MM-DD", nullable).
          </li>
          <li>
            <strong>Success Response (201 Created):</strong> JSON object of the
            new director.
          </li>
          <li>
            <strong>Error Responses:</strong> 400 (Validation errors, Director
            name already exists), 401, 500
          </li>
        </ul>
        <h3><span class="method-put">PUT</span> /directors/:directorId</h3>
        <p>Updates a director's details.</p>
        <ul>
          <li>
            <strong>Authentication:</strong
            ><span class="auth-jwt">JWT Required</span>
          </li>
          <li>
            <strong>URL Parameters:</strong> <code>:directorId</code> (<span
              class="required"
              >Required</span
            >, ObjectId String).
          </li>
          <li>
            <strong>Request Body:</strong> JSON object with optional fields:
            <code>name</code>, <code>bio</code>, <code>birth</code> (Date String
            "YYYY-MM-DD"), <code>death</code> (Date String "YYYY-MM-DD" or
            null).
          </li>
          <li>
            <strong>Success Response (200 OK):</strong> JSON object of the
            updated director.
          </li>
          <li>
            <strong>Error Responses:</strong> 400 (Validation errors, Invalid
            Director ID, Director name conflict, No fields to update), 401, 404
            (Director not found), 500
          </li>
        </ul>
        <h3>
          <span class="method-delete">DELETE</span> /directors/:directorId
        </h3>
        <p>
          Deletes a director. Fails if the director is assigned to any movies.
        </p>
        <ul>
          <li>
            <strong>Authentication:</strong
            ><span class="auth-jwt">JWT Required</span>
          </li>
          <li>
            <strong>URL Parameters:</strong> <code>:directorId</code> (<span
              class="required"
              >Required</span
            >, ObjectId String).
          </li>
          <li>
            <strong>Success Response (200 OK):</strong> JSON:
            <code>{ "message": "Director '...' deleted successfully." }</code>
          </li>
          <li>
            <strong>Error Responses:</strong> 400 (Invalid Director ID, Director
            in use), 401, 404 (Director not found), 500
          </li>
        </ul>
      </section>
      <section class="mt-5">
        <h2 id="actors">Actor Endpoints</h2>
        <h3><span class="method-get">GET</span> /actors</h3>
        <p>
          Retrieves a list of all actors (name, bio, birth, death, pictureUrl).
        </p>
        <ul>
          <li>
            <strong>Authentication:</strong
            ><span class="auth-jwt">JWT Required</span>
          </li>
          <li>
            <strong>Success Response (200 OK):</strong> JSON array of actor
            objects.
          </li>
          <li><strong>Error Responses:</strong> 401, 500</li>
        </ul>
        <h3><span class="method-get">GET</span> /actors/name/:name</h3>
        <p>
          Retrieves actors by name (case-insensitive, partial match). Returns
          array.
        </p>
        <ul>
          <li>
            <strong>Authentication:</strong
            ><span class="auth-jwt">JWT Required</span>
          </li>
          <li>
            <strong>URL Parameters:</strong> <code>:name</code> (<span
              class="required"
              >Required</span
            >, String).
          </li>
          <li>
            <strong>Success Response (200 OK):</strong> JSON array of matching
            actor objects. (Returns 404 if no matches)
          </li>
          <li>
            <strong>Error Responses:</strong> 401, 404 (No actors found), 500
          </li>
        </ul>
        <h3><span class="method-get">GET</span> /actors/:actorId</h3>
        <p>Retrieves details for a single actor by ID.</p>
        <ul>
          <li>
            <strong>Authentication:</strong
            ><span class="auth-jwt">JWT Required</span>
          </li>
          <li>
            <strong>URL Parameters:</strong> <code>:actorId</code> (<span
              class="required"
              >Required</span
            >, ObjectId String).
          </li>
          <li>
            <strong>Success Response (200 OK):</strong> JSON object of the
            actor.
          </li>
          <li>
            <strong>Error Responses:</strong> 400 (Invalid Actor ID), 401, 404
            (Actor not found), 500
          </li>
        </ul>
        <h3><span class="method-post">POST</span> /actors</h3>
        <p>Adds a new actor.</p>
        <ul>
          <li>
            <strong>Authentication:</strong
            ><span class="auth-jwt">JWT Required</span>
          </li>
          <li>
            <strong>Request Body:</strong> JSON: <code>name</code>(<span
              class="required"
              >Req</span
            >), <code>bio</code>(<span class="required">Req</span>),
            <code>birth</code>(<span class="required">Req</span>, Date String
            "YYYY-MM-DD"), <code>death</code>(Optional, Date String
            "YYYY-MM-DD", nullable), <code>pictureUrl</code>(Optional, URL
            String, nullable).
          </li>
          <li>
            <strong>Success Response (201 Created):</strong> JSON object of the
            new actor.
          </li>
          <li>
            <strong>Error Responses:</strong> 400 (Validation errors, Actor name
            already exists), 401, 500
          </li>
        </ul>
        <h3><span class="method-put">PUT</span> /actors/:actorId</h3>
        <p>Updates an actor's details.</p>
        <ul>
          <li>
            <strong>Authentication:</strong
            ><span class="auth-jwt">JWT Required</span>
          </li>
          <li>
            <strong>URL Parameters:</strong> <code>:actorId</code> (<span
              class="required"
              >Required</span
            >, ObjectId String).
          </li>
          <li>
            <strong>Request Body:</strong> JSON object with optional fields:
            <code>name</code>, <code>bio</code>, <code>birth</code> (Date String
            "YYYY-MM-DD"), <code>death</code> (Date String "YYYY-MM-DD" or
            null), <code>pictureUrl</code> (URL String or null).
          </li>
          <li>
            <strong>Success Response (200 OK):</strong> JSON object of the
            updated actor.
          </li>
          <li>
            <strong>Error Responses:</strong> 400 (Validation errors, Invalid
            Actor ID, Actor name conflict, No fields to update), 401, 404 (Actor
            not found), 500
          </li>
        </ul>
        <h3><span class="method-delete">DELETE</span> /actors/:actorId</h3>
        <p>Deletes an actor. Fails if the actor is assigned to any movies.</p>
        <ul>
          <li>
            <strong>Authentication:</strong
            ><span class="auth-jwt">JWT Required</span>
          </li>
          <li>
            <strong>URL Parameters:</strong> <code>:actorId</code> (<span
              class="required"
              >Required</span
            >, ObjectId String).
          </li>
          <li>
            <strong>Success Response (200 OK):</strong> JSON:
            <code>{ "message": "Actor '...' deleted successfully." }</code>
          </li>
          <li>
            <strong>Error Responses:</strong> 400 (Invalid Actor ID, Actor in
            use), 401, 404 (Actor not found), 500
          </li>
        </ul>
      </section>
      <section class="mt-5">
        <h2 id="admin">Admin Endpoints</h2>
        <p>
          These endpoints provide access to potentially sensitive lists. The
          <code>isAdmin</code> middleware currently logs a warning and allows
          access; in a production system, this would enforce admin-only access.
        </p>
        <h3><span class="method-get">GET</span> /admin/users</h3>
        <p>Retrieves a list of all registered users (excluding passwords).</p>
        <ul>
          <li>
            <strong>Authentication:</strong
            ><span class="auth-jwt">JWT Required</span> (Admin role intended).
          </li>
          <li>
            <strong>Success Response (200 OK):</strong> JSON array of user
            objects.
          </li>
          <li><strong>Error Responses:</strong> 401, 500</li>
        </ul>
        <h3><span class="method-get">GET</span> /admin/movies</h3>
        <p>Retrieves a list of all movies with populated info.</p>
        <ul>
          <li>
            <strong>Authentication:</strong
            ><span class="auth-jwt">JWT Required</span> (Admin role intended).
          </li>
          <li>
            <strong>Success Response (200 OK):</strong> JSON array of movie
            objects.
          </li>
          <li><strong>Error Responses:</strong> 401, 500</li>
        </ul>
        <h3><span class="method-get">GET</span> /admin/genres</h3>
        <p>Retrieves a list of all genres.</p>
        <ul>
          <li>
            <strong>Authentication:</strong
            ><span class="auth-jwt">JWT Required</span> (Admin role intended).
          </li>
          <li>
            <strong>Success Response (200 OK):</strong> JSON array of genre
            objects.
          </li>
          <li><strong>Error Responses:</strong> 401, 500</li>
        </ul>
        <h3><span class="method-get">GET</span> /admin/directors</h3>
        <p>Retrieves a list of all directors.</p>
        <ul>
          <li>
            <strong>Authentication:</strong
            ><span class="auth-jwt">JWT Required</span> (Admin role intended).
          </li>
          <li>
            <strong>Success Response (200 OK):</strong> JSON array of director
            objects.
          </li>
          <li><strong>Error Responses:</strong> 401, 500</li>
        </ul>
        <h3><span class="method-get">GET</span> /admin/actors</h3>
        <p>Retrieves a list of all actors.</p>
        <ul>
          <li>
            <strong>Authentication:</strong
            ><span class="auth-jwt">JWT Required</span> (Admin role intended).
          </li>
          <li>
            <strong>Success Response (200 OK):</strong> JSON array of actor
            objects.
          </li>
          <li><strong>Error Responses:</strong> 401, 500</li>
        </ul>
      </section>
      <section class="mt-5">
        <h2 id="data-models">Data Models</h2>
        <div>
          <h3>Movie Model Schema</h3>
          <ul>
            <li><code>_id</code> (ObjectId)</li>
            <li>
              <code>Title</code> (String, <span class="required">Req</span>,
              Unique)
            </li>
            <li>
              <code>Description</code> (String,
              <span class="required">Req</span>)
            </li>
            <li>
              <code>Genre</code> (ObjectId, Ref: 'Genre',
              <span class="required">Req</span>)
            </li>
            <li>
              <code>Director</code> (ObjectId, Ref: 'Director',
              <span class="required">Req</span>)
            </li>
            <li><code>Actors</code> (Array of ObjectId, Ref: 'Actor')</li>
            <li><code>ImagePath</code> (String)</li>
            <li><code>Featured</code> (Boolean, Default: false)</li>
            <li><code>ReleaseYear</code> (Number)</li>
            <li><code>Rating</code> (Number)</li>
          </ul>
        </div>
        <div>
          <h3>User Model Schema</h3>
          <ul>
            <li><code>_id</code> (ObjectId)</li>
            <li>
              <code>username</code> (String, <span class="required">Req</span>,
              Unique)
            </li>
            <li>
              <code>password</code> (String, <span class="required">Req</span>,
              Hashed)
            </li>
            <li>
              <code>email</code> (String, <span class="required">Req</span>,
              Unique)
            </li>
            <li><code>birthday</code> (Date)</li>
            <li><code>firstname</code> (String)</li>
            <li><code>lastname</code> (String)</li>
            <li>
              <code>favoriteMovies</code> (Array of ObjectId, Ref: 'Movie'])
            </li>
          </ul>
        </div>
        <div>
          <h3>Genre Model Schema</h3>
          <ul>
            <li><code>_id</code> (ObjectId)</li>
            <li>
              <code>name</code> (String, <span class="required">Req</span>,
              Unique)
            </li>
            <li>
              <code>description</code> (String,
              <span class="required">Req</span>)
            </li>
          </ul>
        </div>
        <div>
          <h3>Director Model Schema</h3>
          <ul>
            <li><code>_id</code> (ObjectId)</li>
            <li>
              <code>name</code> (String, <span class="required">Req</span>,
              Unique)
            </li>
            <li>
              <code>bio</code> (String, <span class="required">Req</span>)
            </li>
            <li><code>birth</code> (Date)</li>
            <li><code>death</code> (Date, Nullable)</li>
          </ul>
        </div>
        <div>
          <h3>Actor Model Schema</h3>
          <ul>
            <li><code>_id</code> (ObjectId)</li>
            <li>
              <code>name</code> (String, <span class="required">Req</span>,
              Unique)
            </li>
            <li>
              <code>bio</code> (String, <span class="required">Req</span>)
            </li>
            <li><code>birth</code> (Date)</li>
            <li><code>death</code> (Date, Nullable)</li>
            <li><code>pictureUrl</code> (String, Nullable)</li>
          </ul>
        </div>
      </section>
      <section class="mt-5">
        <h2 id="error-responses">Error Responses</h2>
        <p>Common HTTP status codes used:</p>
        <ul>
          <li><code>200 OK</code>: Request succeeded.</li>
          <li><code>201 Created</code>: Resource successfully created.</li>
          <li>
            <code>207 Multi-Status</code>: Batch operation partially successful.
          </li>
          <li>
            <code>400 Bad Request</code>: Request was malformed (e.g.,
            validation error, invalid ID format).
          </li>
          <li>
            <code>401 Unauthorized</code>: Authentication failed or is required.
          </li>
          <li>
            <code>403 Forbidden</code>: Authenticated user does not have
            permission for the action.
          </li>
          <li>
            <code>404 Not Found</code>: Requested resource could not be found.
          </li>
          <li>
            <code>500 Internal Server Error</code>: An unexpected error occurred
            on the server.
          </li>
        </ul>
        <p>General error response format:</p>
        <pre><code>{ "error": "Descriptive error message here" }</code></pre>
        <p>Validation error format (typically 400 Bad Request):</p>
        <pre><code>{ "errors": [ { "type": "field", "msg": "Error message", "path": "fieldName", "location": "body", "value": "providedValue" }, ... ] }</code></pre>
        <p>
          Batch error response format (example for 400 Bad Request when all
          fail):
        </p>
        <pre><code>{ "message": "All user creations in the batch failed.", "errors": [ { "index": 0, "input_username": "...", "error": "...", "field": "...", "value": "..." }, ... ] }</code></pre>
        <p>
          Batch partial success response format (example for 207 Multi-Status):
        </p>
        <pre><code>{ "message": "Batch user creation partially successful.", "succeeded_count": N, "failed_count": M, "succeeded": [ { /* user object */ }, ... ], "failed": [ { "index": 0, "input_username": "...", "error": "...", "field": "...", "value": "..." }, ... ] }</code></pre>
      </section>
    </main>
    <footer class="bg-light py-3 mt-5">
      <div class="container text-center">
        <p>&copy; 2025 MovieMobs. All rights reserved.</p>
        <div class="social-media">
          <a href="https://github.com/ivencomur" target="_blank" rel="noopener">
            <img
              src="img/logo_github_icon.svg"
              alt="Github"
              width="30"
              height="30"
            />
          </a>
          <a href="https://x.com/IVENCOMUR" target="_blank" rel="noopener">
            <img
              src="img/xformertwittericon.svg"
              alt="X former Twitter"
              width="30"
              height="30"
            />
          </a>
          <a
            href="https://www.linkedin.com/in/ivan-cortes-murcia-22053953"
            target="_blank"
            rel="noopener"
          >
            <img
              src="img/linkedinicon.svg"
              alt="LinkedIn"
              width="30"
              height="30"
            />
          </a>
        </div>
      </div>
    </footer>
    <a href="index.html" class="back-to-home-btn" title="Back to Home">Home</a>
    <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.5.3/dist/umd/popper.min.js"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
  </body>
</html>